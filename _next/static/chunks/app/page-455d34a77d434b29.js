(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[974],{3453:(t,e,n)=>{Promise.resolve().then(n.bind(n,1156))},1156:(t,e,n)=>{"use strict";n.d(e,{default:()=>I});var a=n(5155),r=n(2115),s=n(7849);let o=r.forwardRef((t,e)=>{let{className:n,...r}=t;return(0,a.jsx)("div",{ref:e,className:(0,s.cn)("rounded-lg border bg-card text-card-foreground shadow-sm",n),...r})});o.displayName="Card",r.forwardRef((t,e)=>{let{className:n,...r}=t;return(0,a.jsx)("div",{ref:e,className:(0,s.cn)("flex flex-col space-y-1.5 p-6",n),...r})}).displayName="CardHeader",r.forwardRef((t,e)=>{let{className:n,...r}=t;return(0,a.jsx)("h3",{ref:e,className:(0,s.cn)("text-2xl font-semibold leading-none tracking-tight",n),...r})}).displayName="CardTitle",r.forwardRef((t,e)=>{let{className:n,...r}=t;return(0,a.jsx)("div",{ref:e,className:(0,s.cn)("p-6 pt-0",n),...r})}).displayName="CardContent";var d=n(7370);let l=r.forwardRef((t,e)=>{let{className:n,type:r,...o}=t;return(0,a.jsx)("input",{type:r,className:(0,s.cn)("flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",n),ref:e,...o})});l.displayName="Input";var i=n(2800);let h=(0,i.A)("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]),m=(0,i.A)("ZoomIn",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["line",{x1:"21",x2:"16.65",y1:"21",y2:"16.65",key:"13gj7c"}],["line",{x1:"11",x2:"11",y1:"8",y2:"14",key:"1vmskp"}],["line",{x1:"8",x2:"14",y1:"11",y2:"11",key:"durymu"}]]),c=(0,i.A)("ZoomOut",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["line",{x1:"21",x2:"16.65",y1:"21",y2:"16.65",key:"13gj7c"}],["line",{x1:"8",x2:"14",y1:"11",y2:"11",key:"durymu"}]]),g=(0,i.A)("LayoutList",[["rect",{width:"7",height:"7",x:"3",y:"3",rx:"1",key:"1g98yp"}],["rect",{width:"7",height:"7",x:"3",y:"14",rx:"1",key:"1bb6yr"}],["path",{d:"M14 4h7",key:"3xa0d5"}],["path",{d:"M14 9h7",key:"1icrd9"}],["path",{d:"M14 15h7",key:"1mj8o2"}],["path",{d:"M14 20h7",key:"11slyb"}]]),u=(0,i.A)("LayoutGrid",[["rect",{width:"7",height:"7",x:"3",y:"3",rx:"1",key:"1g98yp"}],["rect",{width:"7",height:"7",x:"14",y:"3",rx:"1",key:"6d4xhi"}],["rect",{width:"7",height:"7",x:"14",y:"14",rx:"1",key:"nxv5o0"}],["rect",{width:"7",height:"7",x:"3",y:"14",rx:"1",key:"1bb6yr"}]]),x=(0,i.A)("ListPlus",[["path",{d:"M11 12H3",key:"51ecnj"}],["path",{d:"M16 6H3",key:"1wxfjs"}],["path",{d:"M16 18H3",key:"12xzn7"}],["path",{d:"M18 9v6",key:"1twb98"}],["path",{d:"M21 12h-6",key:"bt1uis"}]]),f=t=>{let{newEventInput:e,onEventInputChange:n,onAddOrUpdate:r,isEditing:s,onCancelEdit:o,onToggleBatch:i,onZoomIn:f,onZoomOut:p,isGridView:y,onToggleView:w}=t;return(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsx)("div",{className:"flex flex-wrap gap-2",children:(0,a.jsxs)("div",{className:"flex-1 min-w-[300px] flex gap-2",children:[(0,a.jsx)(l,{value:e,onChange:n,placeholder:"Format: YYYY/MM/DD~YYYY/MM/DD Event Name or YYYY/MM/DD Event Name",className:"flex-1 text-sm"}),(0,a.jsxs)(d.$,{onClick:r,className:"whitespace-nowrap",children:[(0,a.jsx)(h,{className:"w-4 h-4 mr-1"}),s?"Update Event":"Add Event"]})]})}),(0,a.jsxs)("div",{className:"flex flex-wrap items-center gap-2",children:[(0,a.jsxs)("div",{className:"flex gap-2",children:[(0,a.jsxs)(d.$,{variant:"outline",className:"whitespace-nowrap",onClick:f,children:[(0,a.jsx)(m,{className:"w-4 h-4 mr-1"}),"Zoom In"]}),(0,a.jsxs)(d.$,{variant:"outline",className:"whitespace-nowrap",onClick:p,children:[(0,a.jsx)(c,{className:"w-4 h-4 mr-1"}),"Zoom Out"]}),(0,a.jsx)(d.$,{variant:"outline",className:"whitespace-nowrap",onClick:w,children:y?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(g,{className:"w-4 h-4 mr-1"}),"List View"]}):(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(u,{className:"w-4 h-4 mr-1"}),"Grid View"]})})]}),(0,a.jsxs)("div",{className:"flex gap-2 ml-auto",children:[s&&(0,a.jsx)(d.$,{variant:"outline",className:"whitespace-nowrap",onClick:o,children:"Cancel Edit"}),(0,a.jsxs)(d.$,{variant:"outline",className:"whitespace-nowrap",onClick:i,children:[(0,a.jsx)(x,{className:"w-4 h-4 mr-1"}),"Batch Add"]})]})]})]})},p=r.forwardRef((t,e)=>{let{className:n,...r}=t;return(0,a.jsx)("textarea",{className:(0,s.cn)("flex min-h-[80px] w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",n),ref:e,...r})});p.displayName="Textarea";let y=t=>{let{value:e,onChange:n,onConfirm:r,onCancel:s}=t;return(0,a.jsxs)("div",{className:"mt-8 mb-4",children:[(0,a.jsx)(p,{value:e,onChange:n,placeholder:"One event per line Format: YYYY/MM/DD~YYYY/MM/DD Event Name Example: 2024/12/15 Event 1 2024/12/22~2024/12/23 Event 2",className:"min-h-[120px] mb-2 text-sm"}),(0,a.jsxs)("div",{className:"flex gap-2",children:[(0,a.jsx)(d.$,{onClick:r,className:"text-sm",children:"Confirm"}),(0,a.jsx)(d.$,{variant:"outline",className:"text-sm",onClick:s,children:"Cancel"})]})]})},w={2024:[{month:1,start:"0210",end:"0309"},{month:2,start:"0310",end:"0408"},{month:3,start:"0409",end:"0507"},{month:4,start:"0508",end:"0605"},{month:5,start:"0606",end:"0705"},{month:6,start:"0706",end:"0803"},{month:7,start:"0804",end:"0902"},{month:8,start:"0903",end:"1002"},{month:9,start:"1003",end:"1031"},{month:10,start:"1101",end:"1130"},{month:11,start:"1201",end:"1230"},{month:12,start:"1231",end:"0128"}],2025:[{month:1,start:"0129",end:"0227"},{month:2,start:"0228",end:"0328"},{month:3,start:"0329",end:"0427"},{month:4,start:"0428",end:"0526"},{month:5,start:"0527",end:"0624"},{month:6,start:"0625",end:"0724"},{month:"6l",start:"0725",end:"0822"},{month:7,start:"0823",end:"0921"},{month:8,start:"0922",end:"1020"},{month:9,start:"1021",end:"1119"},{month:10,start:"1120",end:"1219"},{month:11,start:"1220",end:"0118"},{month:12,start:"0119",end:"0216"}],2026:[{month:1,start:"0217",end:"0318"},{month:2,start:"0319",end:"0416"},{month:3,start:"0417",end:"0516"},{month:4,start:"0517",end:"0614"},{month:5,start:"0615",end:"0713"},{month:6,start:"0714",end:"0812"},{month:7,start:"0813",end:"0910"},{month:8,start:"0911",end:"1009"},{month:9,start:"1010",end:"1108"},{month:10,start:"1109",end:"1208"},{month:11,start:"1209",end:"0107"},{month:12,start:"0108",end:"0205"}],2027:[{month:1,start:"0206",end:"0307"},{month:2,start:"0308",end:"0406"},{month:3,start:"0407",end:"0505"},{month:4,start:"0506",end:"0604"},{month:5,start:"0605",end:"0703"},{month:6,start:"0704",end:"0801"},{month:7,start:"0802",end:"0831"},{month:8,start:"0901",end:"0929"},{month:9,start:"0930",end:"1028"},{month:10,start:"1029",end:"1127"},{month:11,start:"1128",end:"1227"},{month:12,start:"1228",end:"0125"}],2028:[{month:1,start:"0126",end:"0224"},{month:2,start:"0225",end:"0325"},{month:3,start:"0326",end:"0424"},{month:4,start:"0425",end:"0523"},{month:5,start:"0524",end:"0622"},{month:"5l",start:"0623",end:"0721"},{month:6,start:"0722",end:"0819"},{month:7,start:"0820",end:"0918"},{month:8,start:"0919",end:"1017"},{month:9,start:"1018",end:"1115"},{month:10,start:"1116",end:"1215"},{month:11,start:"1216",end:"0114"},{month:12,start:"0115",end:"0212"}],2029:[{month:1,start:"0213",end:"0314"},{month:2,start:"0315",end:"0413"},{month:3,start:"0414",end:"0512"},{month:4,start:"0513",end:"0611"},{month:5,start:"0612",end:"0710"},{month:6,start:"0711",end:"0809"},{month:7,start:"0810",end:"0907"},{month:8,start:"0908",end:"1007"},{month:9,start:"1008",end:"1105"},{month:10,start:"1106",end:"1204"},{month:11,start:"1205",end:"0103"},{month:12,start:"0104",end:"0202"}],2030:[{month:1,start:"0203",end:"0303"},{month:2,start:"0304",end:"0402"},{month:3,start:"0403",end:"0501"},{month:4,start:"0502",end:"0531"},{month:5,start:"0601",end:"0630"},{month:6,start:"0701",end:"0729"},{month:7,start:"0730",end:"0828"},{month:8,start:"0829",end:"0926"},{month:9,start:"0927",end:"1026"},{month:10,start:"1027",end:"1124"},{month:11,start:"1125",end:"1224"},{month:12,start:"1225",end:"0122"}],2031:[{month:1,start:"0123",end:"0220"},{month:2,start:"0221",end:"0322"},{month:3,start:"0323",end:"0421"},{month:"3l",start:"0422",end:"0520"},{month:4,start:"0521",end:"0619"},{month:5,start:"0620",end:"0718"},{month:6,start:"0719",end:"0817"},{month:7,start:"0818",end:"0916"},{month:8,start:"0917",end:"1015"},{month:9,start:"1016",end:"1114"},{month:10,start:"1115",end:"1213"},{month:11,start:"1214",end:"0112"},{month:12,start:"0113",end:"0210"}],2032:[{month:1,start:"0211",end:"0311"},{month:2,start:"0312",end:"0409"},{month:3,start:"0410",end:"0508"},{month:4,start:"0509",end:"0607"},{month:5,start:"0608",end:"0706"},{month:6,start:"0707",end:"0805"},{month:7,start:"0806",end:"0904"},{month:8,start:"0905",end:"1003"},{month:9,start:"1004",end:"1102"},{month:10,start:"1103",end:"1202"},{month:11,start:"1203",end:"1231"},{month:12,start:"0101",end:"0130"}],2033:[{month:1,start:"0131",end:"0228"},{month:2,start:"0301",end:"0330"},{month:3,start:"0331",end:"0428"},{month:4,start:"0429",end:"0527"},{month:5,start:"0528",end:"0626"},{month:6,start:"0627",end:"0725"},{month:7,start:"0726",end:"0824"},{month:8,start:"0825",end:"0922"},{month:9,start:"0923",end:"1022"},{month:10,start:"1023",end:"1121"},{month:11,start:"1122",end:"1221"},{month:"11l",start:"1222",end:"0119"},{month:12,start:"0120",end:"0218"}],2034:[{month:1,start:"0219",end:"0319"},{month:2,start:"0320",end:"0418"},{month:3,start:"0419",end:"0517"},{month:4,start:"0518",end:"0615"},{month:5,start:"0616",end:"0715"},{month:6,start:"0716",end:"0813"},{month:7,start:"0814",end:"0912"},{month:8,start:"0913",end:"1011"},{month:9,start:"1012",end:"1110"},{month:10,start:"1111",end:"1210"},{month:11,start:"1211",end:"0108"},{month:12,start:"0109",end:"0207"}],2035:[{month:1,start:"0208",end:"0309"},{month:2,start:"0310",end:"0407"},{month:3,start:"0408",end:"0507"},{month:4,start:"0508",end:"0605"},{month:5,start:"0606",end:"0704"},{month:6,start:"0705",end:"0803"},{month:7,start:"0804",end:"0901"},{month:8,start:"0902",end:"0930"},{month:9,start:"1001",end:"1030"},{month:10,start:"1031",end:"1129"},{month:11,start:"1130",end:"1228"},{month:12,start:"1229",end:"0127"}],2036:[{month:1,start:"0128",end:"0226"},{month:2,start:"0227",end:"0327"},{month:3,start:"0328",end:"0425"},{month:4,start:"0426",end:"0525"},{month:5,start:"0526",end:"0623"},{month:6,start:"0624",end:"0722"},{month:"6l",start:"0723",end:"0821"},{month:7,start:"0822",end:"0919"},{month:8,start:"0920",end:"1018"},{month:9,start:"1019",end:"1117"},{month:10,start:"1118",end:"1216"},{month:11,start:"1217",end:"0115"},{month:12,start:"0116",end:"0214"}],2037:[{month:1,start:"0215",end:"0316"},{month:2,start:"0317",end:"0415"},{month:3,start:"0416",end:"0514"},{month:4,start:"0515",end:"0613"},{month:5,start:"0614",end:"0712"},{month:6,start:"0713",end:"0810"},{month:7,start:"0811",end:"0909"},{month:8,start:"0910",end:"1008"},{month:9,start:"1009",end:"1106"},{month:10,start:"1107",end:"1206"},{month:11,start:"1207",end:"0104"},{month:12,start:"0105",end:"0203"}],2038:[{month:1,start:"0204",end:"0305"},{month:2,start:"0306",end:"0404"},{month:3,start:"0405",end:"0503"},{month:4,start:"0504",end:"0602"},{month:5,start:"0603",end:"0701"},{month:6,start:"0702",end:"0731"},{month:7,start:"0801",end:"0829"},{month:8,start:"0830",end:"0928"},{month:9,start:"0929",end:"1027"},{month:10,start:"1028",end:"1125"},{month:11,start:"1126",end:"1225"},{month:12,start:"1226",end:"0123"}],2039:[{month:1,start:"0124",end:"0222"},{month:2,start:"0223",end:"0324"},{month:3,start:"0325",end:"0422"},{month:4,start:"0423",end:"0522"},{month:5,start:"0523",end:"0621"},{month:"5l",start:"0622",end:"0720"},{month:6,start:"0721",end:"0819"},{month:7,start:"0820",end:"0917"},{month:8,start:"0918",end:"1017"},{month:9,start:"1018",end:"1115"},{month:10,start:"1116",end:"1215"},{month:11,start:"1216",end:"0113"},{month:12,start:"0114",end:"0211"}],2040:[{month:1,start:"0212",end:"0312"},{month:2,start:"0313",end:"0410"},{month:3,start:"0411",end:"0510"},{month:4,start:"0511",end:"0609"},{month:5,start:"0610",end:"0708"},{month:6,start:"0709",end:"0807"},{month:7,start:"0808",end:"0905"},{month:8,start:"0906",end:"1005"},{month:9,start:"1006",end:"1104"},{month:10,start:"1105",end:"1203"},{month:11,start:"1204",end:"0102"},{month:12,start:"0103",end:"0201"}]};function v(t){let e=t.getFullYear(),n=(t.getMonth()+1).toString().padStart(2,"0"),a=n+t.getDate().toString().padStart(2,"0"),r=w[e];if("01"===n||"02"===n){let t=w[e-1];if(t){let e=t[t.length-1];parseInt(a)<=parseInt(e.end)&&(r=t)}}if(!r)return null;let s=null;for(let t of r){let e=parseInt(t.start),n=parseInt(t.end),r=parseInt(a);if(t.end<t.start){if(r>=e||r<=n){s=t;break}}else if(r>=e&&r<=n){s=t;break}}if(!s)return null;let o=1,d=s.start;for(;d!==a;){o++;let t=parseInt(d.substring(0,2)),n=parseInt(d.substring(2)),a=new Date(e,t,0).getDate();if(++n>a&&(n=1,++t>12&&(t=1)),d=t.toString().padStart(2,"0")+n.toString().padStart(2,"0"),o>40)break}if(1===o){let t="string"==typeof s.month?"閏".concat(s.month.replace("l","")):s.month.toString();return"".concat(t,"月")}return o<=10?"初".concat(["一","二","三","四","五","六","七","八","九","十"][o-1]):o.toString()}let b=t=>{let{month:e,year:n,days:s,children:o,zoomLevel:d,scaledWidth:l}=t,i=t=>{if("number"==typeof t){let r=v(new Date(n,e-1,t));return(0,a.jsx)("div",{className:"relative w-full h-full",children:(0,a.jsxs)("div",{className:"absolute inset-0 flex flex-col items-center justify-start pt-2",children:[(0,a.jsx)("span",{className:"text-gray-600 dark:text-gray-500 font-light",style:{fontSize:"".concat(16*d,"px"),lineHeight:1,opacity:.9},children:t}),r&&(0,a.jsx)("span",{className:"text-gray-500 dark:text-gray-400",style:{fontSize:"".concat(10*d,"px"),lineHeight:1,marginTop:"2px"},children:r})]})})}return t};return(0,a.jsxs)("div",{className:"relative mb-8",style:{width:"".concat(l,"px")},children:[(0,a.jsx)("h2",{className:"text-xl mb-2 dark:text-white font-semibold",style:{transform:"scale(".concat(d,")"),transformOrigin:"left"},children:"".concat(["January","February","March","April","May","June","July","August","September","October","November","December"][e-1]," ").concat(n)}),(0,a.jsxs)("div",{className:"grid grid-cols-7 relative",children:[["Sun","Mon","Tue","Wed","Thu","Fri","Sat"].map(t=>(0,a.jsx)("div",{className:"text-center mb-2 font-medium dark:text-gray-300",style:{transform:"scale(".concat(d,")"),transformOrigin:"center"},children:t},t)),r.Children.map(s,t=>{if(r.isValidElement(t)&&t.props.children){let e=t.props.children;if("number"==typeof e)return r.cloneElement(t,{children:i(e)})}return t}),o]})]})},j=(0,i.A)("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]),N=t=>{let{segment:e,startOffset:n,daysInSegment:r,row:s,weekOffset:o,zoomLevel:d,onEdit:l,onDelete:i}=t,h=Math.min(26.5*d,26.5*d-1);return(0,a.jsx)("div",{className:"absolute rounded-sm cursor-pointer hover:brightness-95 dark:hover:brightness-110",style:{left:"calc(".concat(100/7*n,"% + 1px)"),width:"calc(".concat(100/7*r,"% - 2px)"),top:"".concat(o+26.5*s*d+33,"px"),height:"".concat(h,"px"),backgroundColor:e.color,zIndex:10,overflow:"hidden"},onClick:l,children:(0,a.jsx)("div",{className:"flex justify-between items-center h-full px-0.5",style:{fontSize:"".concat(Math.min(18*d,20),"px")},children:e.isFirstSegment&&(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("span",{className:"truncate font-medium dark:text-gray-900 flex-grow pr-0.5",children:e.title}),(0,a.jsx)("button",{onClick:t=>{t.stopPropagation(),i(e.originalEventId)},className:"opacity-0 hover:opacity-100 p-0.5 flex-shrink-0",style:{height:"100%",display:"flex",alignItems:"center"},children:(0,a.jsx)(j,{size:Math.min(10*d,h-4),className:"dark:text-gray-800"})})]})})})},k=function(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:new Date().getFullYear(),a=t.trim().match(/(?:(\d{4})?\/)?(\d{1,2}\/\d{1,2})(?:[-~](?:(\d{4})?\/)?(\d{1,2}\/\d{1,2}))?\s+(.+)/);if(a){let t;let[r,s,o,d,l,i]=a,h=new Date("".concat(s||n,"/").concat(o));return(l?(t=new Date("".concat(d||s||n,"/").concat(l))).setHours(23,59,59):(t=new Date(h)).setHours(23,59,59),isNaN(h.getTime())||isNaN(t.getTime()))?(console.error("Invalid date parsing result"),null):{id:e||Date.now()+Math.random(),start:h,end:t,title:i.trim()}}return null},M=(t,e)=>{let n=new Date(new Date(t.getFullYear(),t.getMonth(),1));return n.setDate(1-e),Math.floor(Math.floor((t.getTime()-n.getTime())/864e5)/7)},D=t=>{let e=new Set;return t.forEach(t=>{let n=new Date(t.start),a=new Date(t.end),r=new Date(n.getFullYear(),n.getMonth(),1),s=new Date(a.getFullYear(),a.getMonth(),1);for(;r<=s;)e.add("".concat(r.getFullYear(),"-").concat(r.getMonth()+1)),r.setMonth(r.getMonth()+1)}),Array.from(e).map(t=>{let[e,n]=t.split("-").map(Number);return{year:e,month:n}}).sort((t,e)=>t.year!==e.year?t.year-e.year:t.month-e.month)},S=function(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return"hsla(".concat((t+e)*137.5%360,", 70%, 75%, 0.7)")},E=(t,e)=>{let n=t.start.getFullYear(),a=new Date(n,e-1,1),r=new Date(n,e,0),s=a.getDay(),o=new Date(Math.max(t.start,a)),d=new Date(Math.min(t.end,r)),l=[],i=new Date(o);for(;i<=d;){let e=M(i,s),n=6-i.getDay(),a=new Date(i);a.setDate(i.getDate()+n);let r=new Date(Math.min(a.getTime(),d.getTime()));l.push({id:"".concat(t.id,"-week-").concat(e),originalEventId:t.id,start:new Date(i),end:new Date(r),week:e,title:t.title,color:t.color,isFirstSegment:i.getTime()===o.getTime(),isLastSegment:r.getTime()===d.getTime()}),(i=new Date(a)).setDate(i.getDate()+1)}return l},C=t=>{let e=new Map,n=0;return t.sort((t,e)=>{let n=t.start.getTime()-e.start.getTime();return 0!==n?n:t.end.getTime()-t.start.getTime()-(e.end.getTime()-e.start.getTime())}),t.forEach(a=>{let r=0;for(;;){if(!t.some(t=>e.get(t.id)===r&&a.id!==t.id&&a.start<=t.end&&a.end>=t.start)){e.set(a.id,r),n=Math.max(n,r);break}r++}}),{rows:e,maxRow:n}},Y="calendar_events",T=()=>{let[t,e]=(0,r.useState)({width:window.innerWidth,height:window.innerHeight});return(0,r.useEffect)(()=>{let t=()=>{e({width:window.innerWidth,height:window.innerHeight})};return window.addEventListener("resize",t),t(),()=>window.removeEventListener("resize",t)},[]),t},I=()=>{let[t,e]=(0,r.useState)([]),[n,s]=(0,r.useState)(""),[d,l]=(0,r.useState)(""),[i,h]=(0,r.useState)(null),[m,c]=(0,r.useState)(!1),[g,u]=(0,r.useState)(1),[x,p]=(0,r.useState)(!1),w=T(),j=(0,r.useMemo)(()=>({cellWidth:120*g,cellHeight:80*g,monthGap:10*g,monthWidth:120*g*7}),[g]);(0,r.useEffect)(()=>{let t=localStorage.getItem(Y);if(t)try{let n=JSON.parse(t).map(t=>({...t,start:new Date(t.start),end:new Date(t.end)}));e(n)}catch(t){console.error("Error loading saved events:",t)}},[]),(0,r.useEffect)(()=>{localStorage.setItem(Y,JSON.stringify(t))},[t]);let M=t=>{h(t);let e=t.end.getMonth()===t.start.getMonth()&&t.end.getDate()===t.start.getDate()?"":"~".concat(t.end.getMonth()+1,"/").concat(t.end.getDate());s("".concat(t.start.getFullYear(),"/").concat(t.start.getMonth()+1,"/").concat(t.start.getDate()).concat(e," ").concat(t.title))},I=t=>{e(e=>e.filter(e=>e.id!==t)),(null==i?void 0:i.id)===t&&(h(null),s(""))};(0,r.useEffect)(()=>{let t=()=>{let t=document.querySelector(".calendar-container");t&&setContainerWidth(t.offsetWidth)};return t(),window.addEventListener("resize",t),()=>window.removeEventListener("resize",t)},[]);let H=(e,n)=>{let r=new Date(n,e-1,1),s=new Date(n,e,0).getDate(),o=r.getDay(),d=t.filter(t=>{let a=new Date(t.start),r=new Date(t.end),s=new Date(n,e-1,1);return a<=new Date(n,e,0,23,59,59)&&r>=s});if(0===d.length)return null;let l=d.flatMap(t=>E(t,e)),i=new Map;l.forEach(t=>{let e=t.week;i.has(e)||i.set(e,[]),i.get(e).push(t)});let h=new Map,m=0;i.forEach((t,e)=>{let{rows:n,maxRow:a}=C(t);h.set(e,n),m=Math.max(m,a)});let c=[];for(let t=0;t<o;t++)c.push((0,a.jsx)("div",{className:"relative dark:bg-gray-800",style:{height:"".concat(j.cellHeight,"px"),width:"".concat(j.cellWidth,"px")},children:(0,a.jsx)("div",{className:"absolute inset-0 flex items-center justify-center",children:(0,a.jsx)("span",{className:"text-gray-600 dark:text-gray-600",style:{transform:"scale(".concat(g,")")}})})},"empty-".concat(t)));let u=()=>Math.floor(.6*Math.min(j.cellHeight,j.cellWidth));for(let t=1;t<=s;t++){let r=v(new Date(n,e-1,t));c.push((0,a.jsx)("div",{className:"relative bg-white dark:bg-gray-800 border border-gray-300 dark:border-gray-700",style:{height:"".concat(j.cellHeight,"px"),width:"".concat(j.cellWidth,"px")},children:(0,a.jsxs)("div",{className:"absolute inset-0 flex flex-col items-center",children:[(0,a.jsx)("div",{className:"flex items-center justify-center flex-grow",style:{paddingTop:"8px"},children:(0,a.jsx)("span",{className:"text-gray-600 dark:text-gray-500 font-light",style:{fontSize:"".concat(u(),"px"),lineHeight:1,opacity:.9},children:t})}),r&&(0,a.jsx)("div",{className:"text-gray-500 dark:text-gray-400 pb-1",style:{fontSize:"".concat(Math.min(16,.4*u()),"px"),lineHeight:1},children:r})]})},t))}let x=Array.from(i.entries()).map(e=>{let[n,r]=e;return r.map(e=>{let r=Math.floor((e.end-e.start)/864e5)+1,s=h.get(n).get(e.id),o=n*j.cellHeight;return(0,a.jsx)(N,{segment:e,startOffset:e.start.getDay(),daysInSegment:r,row:s,weekOffset:o,zoomLevel:g,onEdit:()=>M(t.find(t=>t.id===e.originalEventId)),onDelete:I},e.id)})});return(0,a.jsx)(b,{month:e,year:n,days:c,zoomLevel:g,weekGroups:i,weekLayouts:h,scaledWidth:7*j.cellWidth,children:x})},F=(0,r.useMemo)(()=>{if(!w.width)return{gridStyle:{},optimalZoom:1};let e=w.width-64,n=D(t),a=n.length;if(0===a)return{gridStyle:{},optimalZoom:1};let r=Math.floor((e+10)/(j.monthWidth+10)),s=n.slice(0,r).map(t=>"".concat(j.monthWidth,"px")).join(" ");return{gridStyle:x?{display:"grid",gridTemplateColumns:s,gap:"".concat(10,"px"),width:"".concat(j.monthWidth,"px")}:{},maxMonthsPerRow:r,totalMonths:a}},[w.width,x,t,g]);return(0,a.jsx)(o,{className:"w-full bg-card text-card-foreground overflow-hidden",children:(0,a.jsxs)("div",{className:"p-4",children:[(0,a.jsx)(f,{newEventInput:n,onEventInputChange:t=>s(t.target.value),onAddOrUpdate:()=>{let t=k(n);t&&(i?(e(e=>e.map(e=>e.id===i.id?{...t,color:i.color}:e)),h(null)):e(e=>[...e,{...t,color:S(e.length)}]),s(""))},isEditing:!!i,onCancelEdit:()=>{h(null),s("")},onToggleBatch:()=>c(!m),onZoomIn:()=>{u(t=>Math.min(t+.2,1.5))},onZoomOut:()=>{u(t=>Math.max(t-.2,.3))},isGridView:x,onToggleView:()=>p(!x)}),m&&(0,a.jsx)(y,{value:d,onChange:t=>l(t.target.value),onConfirm:()=>{let n=Date.now(),a=t.length,r=d.split("\n").filter(t=>t.trim()).map((t,e)=>{let r=k(t.trim(),n+e);return r&&(r.color=S(e,a)),r}).filter(t=>null!==t);r.length>0&&(e(t=>[...t,...r]),l(""),c(!1))},onCancel:()=>{l(""),c(!1)}}),(0,a.jsx)("div",{className:"w-full overflow-x-auto",children:(0,a.jsx)("div",{style:F.gridStyle,children:t.length>0&&D(t).map((t,e)=>{let{year:n,month:r}=t;return(0,a.jsx)("div",{className:"min-w-0",style:{gridRow:x?Math.floor(e/F.maxMonthsPerRow)+1:"auto"},children:H(r,n)},"".concat(n,"-").concat(r))})})})]})})}},7370:(t,e,n)=>{"use strict";n.d(e,{$:()=>o});var a=n(5155),r=n(2115),s=n(7849);let o=r.forwardRef((t,e)=>{let{className:n,...r}=t;return(0,a.jsx)("button",{className:(0,s.cn)("inline-flex items-center justify-center rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50","px-4 py-2 bg-primary text-primary-foreground hover:bg-primary/90",n),ref:e,...r})});o.displayName="Button"},7849:(t,e,n)=>{"use strict";n.d(e,{cn:()=>s});var a=n(3463),r=n(9795);function s(){for(var t=arguments.length,e=Array(t),n=0;n<t;n++)e[n]=arguments[n];return(0,r.QP)((0,a.$)(e))}}},t=>{var e=e=>t(t.s=e);t.O(0,[196,441,517,358],()=>e(3453)),_N_E=t.O()}]);